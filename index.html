<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏Å‡∏°‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; font-family: 'Kanit', sans-serif; }
body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}
.app {
    background: white;
    width: 100%;
    max-width: 520px;
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}
h1 { text-align: center; margin: 0; color: #4a148c; }
.subtitle { text-align: center; font-size: 14px; color: #666; margin-bottom: 10px; }

input, button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    font-size: 16px;
    border-radius: 12px;
}
input { border: 1px solid #ccc; }
button {
    border: none;
    background: linear-gradient(135deg, #ff9800, #ff5722);
    color: white;
    font-weight: 600;
    cursor: pointer;
}

.status {
    display: flex;
    justify-content: space-between;
    background: #ede7f6;
    padding: 10px;
    border-radius: 14px;
    margin-top: 10px;
}

.card {
    background: #fafafa;
    border-radius: 18px;
    padding: 15px;
    margin-top: 15px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}

.result { font-weight: 600; margin-top: 10px; }

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 14px;
}
th, td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: center;
}
th { background: #ede7f6; }

.leaderboard {
    background: #fffde7;
    border-radius: 18px;
    padding: 15px;
    margin-top: 20px;
}
</style>
</head>

<body>

<div class="app">
    <h1>üí∞ ‡πÄ‡∏Å‡∏°‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô</h1>
    <div class="subtitle">Compound Interest Competition Game</div>

    <input id="playerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô">

    <div class="status">
        <div>‡∏î‡πà‡∏≤‡∏ô: <span id="level">1</span></div>
        <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
    </div>

    <div class="card">
        <p>‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô: <b><span id="p"></span></b> ‡∏ö‡∏≤‡∏ó</p>
        <p>‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢: <b><span id="r"></span></b>% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ</p>
        <p>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: <b><span id="t"></span></b> ‡∏õ‡∏µ</p>

        <input type="number" id="guess" placeholder="‡∏ó‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢">
        <button onclick="check()">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        <button id="nextBtn" onclick="nextStage()" style="display:none;">‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂Ô∏è</button>

        <div class="result" id="result"></div>
    </div>

    <div id="table"></div>

    <div class="leaderboard">
        <h3>üèÜ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</h3>
        <table id="leaderboardTable">
            <tr><th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th></tr>
        </table>
    </div>
</div>

<script>
let level = 1, score = 0;
let P, r, t, ans;
let isAnswered = false;

function newStage() {
    P = Math.floor(Math.random() * 9000) + 1000;
    r = Math.floor(Math.random() * 6) + 3;
    t = Math.floor(Math.random() * 6) + 2;
    ans = P * Math.pow(1 + r / 100, t);

    document.getElementById("p").textContent = P;
    document.getElementById("r").textContent = r;
    document.getElementById("t").textContent = t;
    document.getElementById("level").textContent = level;
    document.getElementById("score").textContent = score;

    document.getElementById("guess").value = "";
    document.getElementById("result").innerHTML = "";
    document.getElementById("table").innerHTML = "";
    document.getElementById("nextBtn").style.display = "none";

    isAnswered = false;
}

function check() {
    if (isAnswered) return;

    const g = parseFloat(document.getElementById("guess").value);
    const diff = Math.abs(ans - g);

    let point = diff < 100 ? 10 : diff < 500 ? 5 : diff < 1000 ? 2 : 0;
    score += point;

    document.getElementById("result").innerHTML =
        `‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á: ${ans.toFixed(2)} ‡∏ö‡∏≤‡∏ó<br>
         ‡∏Ñ‡∏•‡∏≤‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô: ${diff.toFixed(2)} ‡∏ö‡∏≤‡∏ó<br>
         ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: +${point}`;

    showTable();
    document.getElementById("score").textContent = score;
    document.getElementById("nextBtn").style.display = "block";
    isAnswered = true;
}

function nextStage() {
    saveScore();
    level++;
    newStage();
}

function showTable() {
    let money = P;
    let html = `<div class="card"><b>üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</b><table>
        <tr><th>‡∏õ‡∏µ</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</th></tr>`;
    for (let i = 1; i <= t; i++) {
        money *= (1 + r / 100);
        html += `<tr><td>${i}</td><td>${money.toFixed(2)}</td></tr>`;
    }
    html += "</table></div>";
    document.getElementById("table").innerHTML = html;
}

function saveScore() {
    const name = document.getElementById("playerName").value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠";
    let board = JSON.parse(localStorage.getItem("leaderboard")) || [];
    board.push({ name, score });
    board.sort((a, b) => b.score - a.score);
    board = board.slice(0, 10);
    localStorage.setItem("leaderboard", JSON.stringify(board));
    renderLeaderboard();
}

function renderLeaderboard() {
    const board = JSON.parse(localStorage.getItem("leaderboard")) || [];
    const table = document.getElementById("leaderboardTable");
    table.innerHTML = "<tr><th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th></tr>";
    board.forEach((p, i) => {
        table.innerHTML += `<tr><td>${i+1}</td><td>${p.name}</td><td>${p.score}</td></tr>`;
    });
}

renderLeaderboard();
newStage();
</script>

</body>
</html>

